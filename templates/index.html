<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <title>雷锋视频归档</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/dplayer/dist/DPlayer.min.css">
    <style>
        .navbar {
            background-color: #333;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, .2)
        }

        .navbar a {
            float: left;
            color: #fff;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
            font-size: 17px
        }

        .navbar a:hover {
            background-color: #ddd;
            color: #000
        }

        .video-list {
            display: flex;
            flex-wrap: wrap;
            padding: 20px 0
        }

        .video-container {
            flex: 0 0 auto;
            max-width: 320px;
            margin: 10px;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, .2), 0 6px 20px 0 rgba(0, 0, 0, .19);
            transition: transform .3s
        }

        .video-container:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 16px 0 rgba(0, 0, 0, .2), 0 12px 40px 0 rgba(0, 0, 0, .19)
        }

        .video-title {
            text-align: center;
            margin-bottom: 10px
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/dplayer/dist/DPlayer.min.js"></script>
</head>

<body>
    <div class="navbar"><a href="#"><i class="fas fa-home"></i> 主页</a> <a href="#"><i class="fas fa-video"></i> 视频</a>
    </div>
    <div><input type="text" id="search-input" placeholder="搜索视频标题" /> <button id="search-btn">搜索</button></div>
    <div id="search-results"></div>
    <div class="video-list">{% for file in files %} {% if file.type == 'video' %}<div class="video-container"
            data-title="{{ file.title|lower }}" data-title-original="{{ file.title }}">
            <h2 class="video-title">{{ file.title }}</h2>
            <div class="dplayer-container">
                <div id="dplayer-{{ loop.index0 }}"></div>
                <script>var dp{{ loop.index0 }}=new DPlayer({ container: document.getElementById("dplayer-{{ loop.index0 }}"), video: { url: "{{ file.path }}", type: "{{ mimetypes.guess_type(file.path)[0] }}" }, preload: 'none' });</script>
            </div>
            <p>Size: {{ file.size }} bytes | Modified: {{ file.modified }}</p>
        </div>{% endif %} {% endfor %}</div>
    <script>const searchInput = document.getElementById('search-input'); const searchBtn = document.getElementById('search-btn'); const searchResults = document.getElementById('search-results'); const videoContainers = document.querySelectorAll('.video-container'); function searchVideos() { const searchTerm = searchInput.value.trim().toLowerCase(); searchResults.innerHTML = ''; videoContainers.forEach(container => { const title = container.getAttribute('data-title'); const originalTitle = container.getAttribute('data-title-original'); if (title.includes(searchTerm)) { const clonedContainer = container.cloneNode(true); clonedContainer.querySelector('.video-title').textContent = originalTitle; searchResults.appendChild(clonedContainer); } else { container.style.display = 'none'; } }) } searchBtn.addEventListener('click', searchVideos); searchInput.addEventListener('input', searchVideos);</script>
</body>

</html>
